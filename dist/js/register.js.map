{"version":3,"sources":["register.js"],"names":["$","init","eventList","on","mobile_txt","val","trim","checkPhone","mui","toast","post","mobile","result","meta","status","console","log","attr","time","text","timeId","setInterval","clearInterval","removeAttr","mobile_text","code_text","email_text","pwd_text","pwd2_text","gender_text","length","checkEmail","code","email","pwd","gender","setTimeout","location","href","msg","phone","test","myemail","myReg"],"mappings":"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","sourcesContent":["$(function() {\r\n    init();\r\n    function init() {\r\n        eventList();\r\n    }\r\n    function eventList() {\r\n        $(\".get_code_btn\").on(\"tap\",function() {\r\n            let mobile_txt = $(\"input[name='mobile']\").val().trim();\r\n\r\n            if(!checkPhone(mobile_txt)){\r\n                mui.toast(\"手机号码错误\");\r\n                return;\r\n            }\r\n            $.post(\"http://api.pyg.ak48.xyz/api/public/v1/users/get_reg_code\",{\r\n                mobile:mobile_txt\r\n            },function(result) {\r\n                if(result.meta.status == 200){\r\n                    console.log(result);\r\n                    $(\".get_code_btn\").attr(\"disabled\",\"disabled\");\r\n\r\n                    let time = 5;\r\n                    $(\".get_code_btn\").text(`${time} 秒后再获取`);\r\n                    let timeId = setInterval(()=>{\r\n                        time--;\r\n                        $(\".get_code_btn\").text(`${time} 秒后再获取`);\r\n                        if(time == 0 ){\r\n                            clearInterval(timeId);\r\n                            $(\".get_code_btn\").removeAttr(\"disabled\").text(\"获取验证码\");\r\n                        }\r\n                    },1000)\r\n                } else {\r\n                    console.log(\"失败\",result);\r\n                }\r\n            })\r\n        })\r\n\r\n        $(\".register_btn\").on(\"tap\",function() {\r\n            let mobile_text = $(\"input[name='mobile']\").val().trim();\r\n            let code_text = $(\"input[name='code']\").val().trim();\r\n            let email_text = $(\"input[name='email']\").val().trim();\r\n            let pwd_text = $(\"input[name='pwd']\").val().trim();\r\n            let pwd2_text = $(\"input[name='pwd2']\").val().trim();\r\n            let gender_text = $(\"input[name='gender']\").val().trim();\r\n\r\n\r\n            if (!checkPhone(mobile_text)) {\r\n                mui.toast(\"手机号码错误\");\r\n                return;\r\n            }\r\n        \r\n            if (code_text.length != 4) {\r\n                mui.toast(\"验证码不合法\");\r\n                return;\r\n              }\r\n        \r\n            if (!checkEmail(email_text)) {\r\n                mui.toast(\"邮箱不合法\");\r\n                return;\r\n            }\r\n        \r\n            if (pwd_text.length < 6) {\r\n                mui.toast(\"密码格式不对\");\r\n                return;\r\n            }\r\n           \r\n            if (pwd2_text != pwd_text) {\r\n                mui.toast(\"两次密码不一致！\");\r\n                return;\r\n            }\r\n\r\n            $.post(\"http://api.pyg.ak48.xyz/api/public/v1/users/reg\",{\r\n                mobile: mobile_text,\r\n                code: code_text,\r\n                email: email_text,\r\n                pwd: pwd_text,\r\n                gender: gender_text\r\n            },function(result) {\r\n                if(result.meta.status == 200){\r\n                    mui.toast(\"注册成功\");\r\n                    setTimeout(() => {\r\n                        location.href = \"login.html\";\r\n                    }, 1000);\r\n                } else {\r\n                    mui.toast(result.meta.msg);\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    function checkPhone(phone) {\r\n        if (!/^1[34578]\\d{9}$/.test(phone)) {\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n    \r\n      \r\n      function checkEmail(myemail) {\r\n        var myReg = /^[a-zA-Z0-9_-]+@([a-zA-Z0-9]+\\.)+(com|cn|net|org)$/;\r\n        if (myReg.test(myemail)) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n})"],"file":"register.js"}
{"version":3,"sources":["good_detail.js"],"names":["$","GoodsObj","init","goodsDetail","eventList","on","userStr","sessionStorage","getItem","mui","toast","setTimeout","setItem","location","href","token","JSON","parse","ajax","url","type","data","info","stringify","headers","Authorization","success","result","meta","status","confirm","editType","index","console","log","msg","get","goods_id","getUrl","cat_id","goods_name","goods_number","goods_price","goods_small_logo","goods_weight","html","template","gallery","slider","interval","name","reg","RegExp","r","window","search","substr","match","decodeURI"],"mappings":"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","sourcesContent":["$(function () {\r\n    let GoodsObj = {};\r\n\r\n    init()\r\n\r\n    function init() {\r\n        goodsDetail();\r\n        eventList();\r\n    }\r\n\r\n    function eventList() {\r\n        $(\".shopping_car_btn\").on(\"tap\", function () {\r\n\r\n            let userStr = sessionStorage.getItem(\"userinfo\");\r\n            if (!userStr) {\r\n                mui.toast(\"您还没有登录\");\r\n                setTimeout(() => {\r\n                    sessionStorage.setItem(\"pageurl\", location.href);\r\n                    location.href = \"login.html\";\r\n                }, 1000);\r\n            } else {\r\n                let token = JSON.parse(userStr).token;\r\n                $.ajax({\r\n                    url: \"http://api.pyg.ak48.xyz/api/public/v1/my/cart/add\",\r\n                    type: \"post\",\r\n                    data: {\r\n                        info: JSON.stringify(GoodsObj)\r\n                    },\r\n                    headers: {\r\n                        Authorization: token\r\n                    },\r\n                    success: function (result) {\r\n                        if (result.meta.status == 200) {\r\n                            mui.confirm(\"您是否要跳转到购物车页面？\", \"添加成功\", [\"跳转\", \"取消\"], function (editType) {\r\n                                if (editType.index == 0) {\r\n                                    location.href = \"cart.html\";\r\n                                } else if(editType.index == 1){\r\n                                    console.log(\"取消\")\r\n                                }\r\n                            })\r\n                        } else{\r\n                            mui.toast(result.meta.msg);\r\n                        }\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    function goodsDetail() {\r\n        $.get(\"http://api.pyg.ak48.xyz/api/public/v1/goods/detail\", {\r\n            goods_id: getUrl(\"goods_id\")\r\n        }, function (result) {\r\n            if (result.meta.status == 200) {\r\n\r\n                GoodsObj = {\r\n                    cat_id: result.data.cat_id,\r\n                    goods_id: result.data.goods_id,\r\n                    goods_name: result.data.goods_name,\r\n                    goods_number: result.data.goods_number,\r\n                    goods_price: result.data.goods_price,\r\n                    goods_small_logo: result.data.goods_small_logo,\r\n                    goods_weight: result.data.goods_weight\r\n                };\r\n                \r\n                let data = result.data;\r\n                let html = template(\"mainTpl\", data);\r\n\r\n                $(\".pyg_view\").html(html);\r\n\r\n                var gallery = mui(\".mui-slider\");\r\n                gallery.slider({\r\n                    interval: 5000 //自动轮播周期，若为0则不自动播放，默认为0；\r\n                });\r\n            } else {\r\n                console.log(\"请求失败\", result);\r\n            }\r\n        })\r\n    }\r\n\r\n    function getUrl(name) {\r\n        var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n        var r = window.location.search.substr(1).match(reg);\r\n        if (r != null) return decodeURI(r[2]);\r\n        return null;\r\n    }\r\n})"],"file":"good_detail.js"}
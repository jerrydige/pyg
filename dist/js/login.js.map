{"version":3,"sources":["login.js"],"names":["$","init","eventList","on","username_text","val","trim","password_text","checkPhone","mui","toast","length","post","username","password","result","meta","status","sessionStorage","setItem","JSON","stringify","data","pageurl","getItem","setTimeout","location","href","msg","phone","test"],"mappings":";;AAAAA,CAAC,CAAC,YAAW;AAETC,EAAAA,IAAI;;AACJ,WAASA,IAAT,GAAgB;AACZC,IAAAA,SAAS;AACZ;;AAED,WAASA,SAAT,GAAqB;AACjBF,IAAAA,CAAC,CAAC,YAAD,CAAD,CAAgBG,EAAhB,CAAmB,KAAnB,EAAyB,YAAW;AAEhC,UAAIC,aAAa,GAAGJ,CAAC,CAAC,wBAAD,CAAD,CAA4BK,GAA5B,GAAkCC,IAAlC,EAApB;AACA,UAAIC,aAAa,GAAGP,CAAC,CAAC,wBAAD,CAAD,CAA4BK,GAA5B,GAAkCC,IAAlC,EAApB;;AAEA,UAAG,CAACE,UAAU,CAACJ,aAAD,CAAd,EAA8B;AAC1BK,QAAAA,GAAG,CAACC,KAAJ,CAAU,OAAV;AACA;AACH;;AACD,UAAGH,aAAa,CAACI,MAAd,GAAuB,CAA1B,EAA4B;AACxBF,QAAAA,GAAG,CAACC,KAAJ,CAAU,OAAV;AACA;AACH;;AAEDV,MAAAA,CAAC,CAACY,IAAF,CAAO,6CAAP,EAAqD;AACjDC,QAAAA,QAAQ,EAACT,aADwC;AAEjDU,QAAAA,QAAQ,EAACP;AAFwC,OAArD,EAGE,UAASQ,MAAT,EAAiB;AACf,YAAGA,MAAM,CAACC,IAAP,CAAYC,MAAZ,IAAoB,GAAvB,EAA2B;AAEvBC,UAAAA,cAAc,CAACC,OAAf,CAAuB,UAAvB,EAAkCC,IAAI,CAACC,SAAL,CAAeN,MAAM,CAACO,IAAtB,CAAlC;AACAb,UAAAA,GAAG,CAACC,KAAJ,CAAU,MAAV;AAEA,cAAIa,OAAO,GAAGL,cAAc,CAACM,OAAf,CAAuB,SAAvB,CAAd;;AAEA,cAAG,CAACD,OAAJ,EAAY;AACRA,YAAAA,OAAO,GAAG,YAAV;AACH;;AACDE,UAAAA,UAAU,CAAC,YAAM;AACbC,YAAAA,QAAQ,CAACC,IAAT,GAAgBJ,OAAhB;AACH,WAFS,EAEP,IAFO,CAAV;AAGH,SAbD,MAaO;AACHd,UAAAA,GAAG,CAACC,KAAJ,CAAUK,MAAM,CAACC,IAAP,CAAYY,GAAtB;AACH;AACJ,OApBD;AAqBH,KAnCD;AAoCH,GA5CQ,CA8CT;;;AACA,WAASpB,UAAT,CAAoBqB,KAApB,EAA2B;AACvB,QAAI,CAAC,kBAAkBC,IAAlB,CAAuBD,KAAvB,CAAL,EAAoC;AAClC,aAAO,KAAP;AACD,KAFD,MAEO;AACL,aAAO,IAAP;AACD;AACF;AACN,CAtDA,CAAD","sourcesContent":["$(function() {\r\n\r\n    init();\r\n    function init() {\r\n        eventList();\r\n    }\r\n\r\n    function eventList() {\r\n        $(\".login_btn\").on(\"tap\",function() {\r\n            \r\n            let username_text = $(\"input[name='username']\").val().trim();\r\n            let password_text = $(\"input[name='password']\").val().trim();\r\n\r\n            if(!checkPhone(username_text)){\r\n                mui.toast(\"手机不合法\")\r\n                return;\r\n            }\r\n            if(password_text.length < 6){\r\n                mui.toast(\"密码不合法\")\r\n                return;\r\n            }\r\n\r\n            $.post(\"http://api.pyg.ak48.xyz/api/public/v1/login\",{\r\n                username:username_text,\r\n                password:password_text\r\n            },function(result) {\r\n                if(result.meta.status==200){\r\n\r\n                    sessionStorage.setItem(\"userinfo\",JSON.stringify(result.data));\r\n                    mui.toast(\"登录成功\")\r\n\r\n                    let pageurl = sessionStorage.getItem(\"pageurl\");\r\n\r\n                    if(!pageurl){\r\n                        pageurl = \"index.html\";\r\n                    }\r\n                    setTimeout(() => {\r\n                        location.href = pageurl;\r\n                    }, 1000);\r\n                } else {\r\n                    mui.toast(result.meta.msg)\r\n                }\r\n            })\r\n        })\r\n    }\r\n\r\n    // 验证 手机合法性\r\n    function checkPhone(phone) {\r\n        if (!/^1[34578]\\d{9}$/.test(phone)) {\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      }\r\n})"],"file":"login.js"}